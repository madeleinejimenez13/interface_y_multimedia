<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio: Micro-interacción SVG Premium</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            --success: #10b981;
            --success-dark: #059669;
            --bg-start: #0f172a;
            --bg-end: #1e293b;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --glow: rgba(99, 102, 241, 0.6);
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        /* Fondo animado con burbujas */
        body::before {
            content: '';
            position: absolute;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            top: -250px;
            right: -250px;
            animation: float 20s ease-in-out infinite;
        }

        body::after {
            content: '';
            position: absolute;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(16, 185, 129, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            bottom: -200px;
            left: -200px;
            animation: float 15s ease-in-out infinite reverse;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(50px, 50px) scale(1.1); }
        }

        .container {
            text-align: center;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(10px);
            background: var(--card-bg);
            padding: 60px 50px;
            border-radius: 32px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        h1 {
            color: var(--text-primary);
            font-size: 32px;
            margin-bottom: 8px;
            font-weight: 700;
            background: linear-gradient(135deg, #fff 0%, var(--primary-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 15px;
            margin-bottom: 50px;
            font-weight: 400;
        }

        .download-btn {
            position: relative;
            width: 220px;
            height: 64px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border: none;
            border-radius: 16px;
            cursor: pointer;
            overflow: visible;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 
                0 0 0 0 var(--glow),
                0 10px 40px -10px var(--glow);
            transform: translateY(0);
            position: relative;
        }

        .download-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 16px;
            padding: 2px;
            background: linear-gradient(135deg, var(--primary-light), var(--primary-dark));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.4s;
        }

        .download-btn:hover:not(.loading):not(.success) {
            transform: translateY(-3px);
            box-shadow: 
                0 0 30px 0 var(--glow),
                0 20px 60px -10px var(--glow);
        }

        .download-btn:hover:not(.loading):not(.success)::before {
            opacity: 1;
        }

        .download-btn:active:not(.loading):not(.success) {
            transform: translateY(-1px);
        }

        .btn-text {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 16px;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .icon-svg {
            width: 24px;
            height: 24px;
            fill: none;
            stroke: white;
            stroke-width: 2.5;
            stroke-linecap: round;
            stroke-linejoin: round;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* ESTADO: LOADING */
        .download-btn.loading {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 0 0 0 rgba(99, 102, 241, 0.4),
                inset 0 0 20px rgba(99, 102, 241, 0.2);
            animation: none;
        }

        .download-btn.loading::before {
            opacity: 0;
        }

        .download-btn.loading::after {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: var(--primary);
            border-right-color: var(--primary);
            animation: spin 0.8s cubic-bezier(0.5, 0, 0.5, 1) infinite;
            filter: drop-shadow(0 0 8px var(--glow));
        }

        .download-btn.loading .btn-text,
        .download-btn.loading .icon-svg {
            opacity: 0;
            transform: scale(0);
        }

        /* ESTADO: SUCCESS */
        .download-btn.success {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--success) 0%, var(--success-dark) 100%);
            box-shadow: 
                0 0 40px rgba(16, 185, 129, 0.6),
                0 10px 40px -10px rgba(16, 185, 129, 0.8);
            animation: successPulse 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .download-btn.success::before {
            opacity: 0;
        }

        .download-btn.success .btn-text {
            opacity: 0;
            transform: scale(0);
        }

        .download-btn.success .icon-svg {
            animation: checkDraw 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes successPulse {
            0% {
                transform: scale(1);
            }
            40% {
                transform: scale(1.15);
            }
            60% {
                transform: scale(0.95);
            }
            80% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        @keyframes checkDraw {
            0% {
                stroke-dasharray: 50;
                stroke-dashoffset: 50;
                transform: scale(0) rotate(-45deg);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                stroke-dasharray: 50;
                stroke-dashoffset: 0;
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        /* Partículas mejoradas */
        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: linear-gradient(135deg, var(--success), var(--success-dark));
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            box-shadow: 0 0 10px var(--success);
        }

        .download-btn.success .particle {
            animation: particleBurst 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes particleBurst {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0);
            }
        }

        /* Ondas de éxito */
        .success-ring {
            position: absolute;
            inset: -10px;
            border: 2px solid var(--success);
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }

        .download-btn.success .success-ring {
            animation: ringExpand 0.8s ease-out forwards;
        }

        @keyframes ringExpand {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }
            100% {
                transform: scale(1.8);
                opacity: 0;
            }
        }

        /* Indicador de estado mejorado */
        .status-text {
            margin-top: 32px;
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 500;
            min-height: 24px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            letter-spacing: 0.3px;
        }

        .status-text.active {
            color: var(--primary-light);
            text-shadow: 0 0 20px var(--glow);
        }

        .status-text.success {
            color: var(--success);
            text-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
        }

        /* Barra de progreso */
        .progress-container {
            width: 220px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin: 20px auto 0;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .progress-container.visible {
            opacity: 1;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            border-radius: 2px;
            width: 0%;
            transition: width 3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px var(--glow);
        }

        /* Botón de reset premium */
        .reset-btn {
            margin-top: 28px;
            padding: 12px 28px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            pointer-events: none;
            letter-spacing: 0.3px;
        }

        .reset-btn.visible {
            opacity: 1;
            pointer-events: all;
        }

        .reset-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .reset-btn:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Micro-interacción Premium</h1>
        <p class="subtitle">Animación vectorial con efectos visuales avanzados</p>

        <button class="download-btn" id="mainBtn" aria-label="Descargar archivo">
            <svg class="icon-svg" viewBox="0 0 24 24" id="svgIcon">
                <path id="dynamicPath" d="M12 15V3m0 12l-4-4m4 4l4-4M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2" />
            </svg>
            <span class="btn-text">Descargar</span>
            
            <span class="particle" style="--tx: -40px; --ty: -40px;"></span>
            <span class="particle" style="--tx: 40px; --ty: -40px;"></span>
            <span class="particle" style="--tx: -40px; --ty: 40px;"></span>
            <span class="particle" style="--tx: 40px; --ty: 40px;"></span>
            <span class="particle" style="--tx: 0px; --ty: -50px;"></span>
            <span class="particle" style="--tx: 50px; --ty: 0px;"></span>
            <span class="particle" style="--tx: 0px; --ty: 50px;"></span>
            <span class="particle" style="--tx: -50px; --ty: 0px;"></span>
            
            <span class="success-ring"></span>
        </button>

        <div class="progress-container" id="progressContainer">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div class="status-text" id="statusText">Haz clic para iniciar la descarga</div>
        <button class="reset-btn" id="resetBtn">↻ Reintentar</button>
    </div>

    <script>
        const btn = document.getElementById('mainBtn');
        const path = document.getElementById('dynamicPath');
        const statusText = document.getElementById('statusText');
        const resetBtn = document.getElementById('resetBtn');
        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');

        const PATHS = {
            download: 'M12 15V3m0 12l-4-4m4 4l4-4M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2',
            check: 'M5 13l4 4L19 7'
        };

        let isProcessing = false;

        btn.addEventListener('click', handleDownload);
        resetBtn.addEventListener('click', resetButton);

        function handleDownload() {
            if (isProcessing) return;
            isProcessing = true;

            btn.classList.add('loading');
            statusText.textContent = 'Descargando archivo...';
            statusText.classList.add('active');
            
            progressContainer.classList.add('visible');
            
            setTimeout(() => {
                progressBar.style.width = '100%';
            }, 50);
            
            setTimeout(() => {
                btn.classList.remove('loading');
                btn.classList.add('success');
                
                path.setAttribute('d', PATHS.check);
                
                statusText.textContent = '¡Descarga completada con éxito!';
                statusText.classList.remove('active');
                statusText.classList.add('success');
                
                progressContainer.classList.remove('visible');
                
                setTimeout(() => {
                    resetBtn.classList.add('visible');
                }, 600);
                
                setTimeout(() => {
                    if (btn.classList.contains('success')) {
                        resetButton();
                    }
                }, 6000);
            }, 3000);
        }

        function resetButton() {
            btn.classList.remove('success');
            path.setAttribute('d', PATHS.download);
            statusText.textContent = 'Haz clic para iniciar la descarga';
            statusText.classList.remove('success');
            resetBtn.classList.remove('visible');
            progressBar.style.width = '0%';
            isProcessing = false;
        }

        btn.addEventListener('mousedown', (e) => {
            if (isProcessing) e.preventDefault();
        });
    </script>
</body>
</html>